ServerRoot "<%= @server_root %>"
Listen 127.0.0.1:64506

<% if running_as_root? %>
	User <%= @normal_user %>
	Group <%= @normal_group %>
<% end %>

<% if !has_builtin_module?('mod_log_config.c') %>
	LoadModule log_config_module "<%= @modules_dir %>/mod_log_config.so"
<% end %>
<% if !has_builtin_module?('mod_mime.c') && has_module?('mod_unique_id.so') %>
	LoadModule unique_id_module "<%= @modules_dir %>/mod_unique_id.so"
<% end %>
<% if !has_builtin_module?('mod_mime.c') %>
	LoadModule mime_module "<%= @modules_dir %>/mod_mime.so"
<% end %>
<% if !has_builtin_module?('mod_dir.c') %>
	LoadModule dir_module "<%= @modules_dir %>/mod_dir.so"
<% end %>
<% if !has_builtin_module?('mod_alias.c') %>
	LoadModule alias_module "<%= @modules_dir %>/mod_alias.so"
<% end %>
<% if !has_builtin_module?('mod_rewrite.c') && has_module?('mod_rewrite.so') %>
	LoadModule rewrite_module "<%= @modules_dir %>/mod_rewrite.so"
<% end %>
LoadModule passenger_module "<%= @mod_passenger %>"

RailsSpawnServer "<%= @spawn_server %>"
RailsRuby "<%= RUBY %>"
RailsEnv production

TypesConfig "<%= @server_root %>/mime.types"
<IfModule mpm_prefork_module>
	StartServers          1
	MinSpareServers       1
	MaxSpareServers       3
	MaxClients           50
	MaxRequestsPerChild  50
</IfModule>

<Directory />
	AllowOverride all
</Directory>

ServerAdmin admin@passenger.test
ServerName passenger.test
DocumentRoot "<%= @stub_dir %>/mycook/public"

LockFile  <%= @server_root %>/httpd.lock
PidFile   <%= @server_root %>/httpd.pid
ErrorLog  <%= @server_root %>/errors.log
CustomLog <%= @server_root %>/access.log combined

NameVirtualHost *:64506

<VirtualHost *:64506>
	ServerName mycook.passenger.test
	DocumentRoot "<%= @stub_dir %>/mycook/public"
</VirtualHost>

<VirtualHost *:64506>
	ServerName zsfa.passenger.test
	DocumentRoot "<%= @stub_dir %>/zsfa"
	RailsBaseURI /mycook
	RailsBaseURI /foo
</VirtualHost>
